var jsc=function(e,t){"use strict";function n(e,t){if(Array.isArray(t))return!!Array.isArray(e)&&(t.length===e.length&&t.every((t,r)=>n(e[r],t)));if("object"==typeof t){if(!e)return!t;if("or"in t)return t.or.some(t=>n(e,t));for(const[r,s]of Object.entries(t))if(!n(e[r],s))return!1;return!0}return t===e}function r(e){let t,n=e[0],r=1;for(;r<e.length;){const s=e[r],i=e[r+1];if(r+=2,("optionalAccess"===s||"optionalCall"===s)&&null==n)return;"access"===s||"optionalAccess"===s?(t=n,n=i(n)):"call"!==s&&"optionalCall"!==s||(n=i((...e)=>n.call(t,...e)),t=void 0)}return n}const s={type:"ExpressionStatement",expression:{type:"LogicalExpression",left:{type:"Identifier"},right:{type:"SequenceExpression",expressions:[{type:"AssignmentExpression",left:{type:"Identifier"},operator:"=",right:{type:"CallExpression",callee:{type:"Identifier"},arguments:{or:[[{type:"Literal"},{type:"CallExpression",callee:{type:"Identifier",name:"decodeURIComponent"},arguments:[{type:"Identifier"}],optional:!1}],[{type:"CallExpression",callee:{type:"Identifier",name:"decodeURIComponent"},arguments:[{type:"Identifier"}],optional:!1}]]},optional:!1}},{type:"CallExpression"}]},operator:"&&"}},i={or:[{type:"ExpressionStatement",expression:{type:"AssignmentExpression",operator:"=",left:{type:"Identifier"},right:{type:"FunctionExpression",params:[{},{},{}]}}},{type:"FunctionDeclaration",params:[{},{},{}]}]};function o(e){let t,n=e[0],r=1;for(;r<e.length;){const s=e[r],i=e[r+1];if(r+=2,("optionalAccess"===s||"optionalCall"===s)&&null==n)return;"access"===s||"optionalAccess"===s?(t=n,n=i(n)):"call"!==s&&"optionalCall"!==s||(n=i((...e)=>n.call(t,...e)),t=void 0)}return n}const p={type:"VariableDeclaration",kind:"var",declarations:[{type:"VariableDeclarator",id:{type:"Identifier"},init:{type:"ArrayExpression",elements:[{type:"Identifier"}]}}]},a=[{type:"ReturnStatement",argument:{type:"BinaryExpression",left:{type:"MemberExpression",object:{type:"Identifier"},computed:!0,property:{type:"Literal"},optional:!1},right:{type:"Identifier"},operator:"+"}}];function l(e){return{type:"ArrowFunctionExpression",params:[{type:"Identifier",name:"nsig"}],body:{type:"CallExpression",callee:{type:"Identifier",name:e},arguments:[{type:"Identifier",name:"nsig"}],optional:!1},async:!1,expression:!1,generator:!1}}const c=e.parse('\nglobalThis.XMLHttpRequest = { prototype: {} };\nconst window = Object.assign(Object.create(null), globalThis);\nwindow.location = new URL("https://www.youtube.com/watch?v=yt-dlp-wins");\nconst document = {};\nlet self = globalThis;\n').body;function y(e){let t,n=e[0],r=1;for(;r<e.length;){const s=e[r],i=e[r+1];if(r+=2,("optionalAccess"===s||"optionalCall"===s)&&null==n)return;"access"===s||"optionalAccess"===s?(t=n,n=i(n)):"call"!==s&&"optionalCall"!==s||(n=i((...e)=>n.call(t,...e)),t=void 0)}return n}function u(u){const f=e.parse(u),x=f.body,d=(()=>{switch(x.length){case 1:{const e=x[0];if("ExpressionStatement"===y([e,"optionalAccess",e=>e.type])&&"CallExpression"===e.expression.type&&"MemberExpression"===e.expression.callee.type&&"FunctionExpression"===e.expression.callee.object.type)return e.expression.callee.object.body;break}case 2:{const e=x[1];if("ExpressionStatement"===y([e,"optionalAccess",e=>e.type])&&"CallExpression"===e.expression.type&&"FunctionExpression"===e.expression.callee.type){const t=e.expression.callee.body;return t.body.splice(0,1),t}break}}throw"unexpected structure"})(),m={nsig:[],sig:[]},g=d.body.filter(e=>{const t=function(e){if(!n(e,p)){let t=null,r=null;switch(e.type){case"ExpressionStatement":"AssignmentExpression"===e.expression.type&&"Identifier"===e.expression.left.type&&"FunctionExpression"===e.expression.right.type&&1===e.expression.right.params.length&&(t=e.expression.left.name,r=e.expression.right.body);break;case"FunctionDeclaration":1===e.params.length&&(t=o([e,"access",e=>e.id,"optionalAccess",e=>e.name]),r=e.body)}if(!r||!t)return null;const s=r.body.at(-2);return"TryStatement"!==o([s,"optionalAccess",e=>e.type])||"CatchClause"!==o([s,"access",e=>e.handler,"optionalAccess",e=>e.type])?null:n(s.handler.body.body,a)?l(t):null}if("VariableDeclaration"!==e.type)return null;const t=e.declarations[0];if("VariableDeclarator"!==t.type||!t.init||"ArrayExpression"!==t.init.type||1!==t.init.elements.length)return null;const[r]=t.init.elements;return r&&"Identifier"===r.type?l(r.name):null}(e);t&&m.nsig.push(t);const c=function(e){if(!n(e,i))return null;const t=r(["ExpressionStatement"===e.type&&"AssignmentExpression"===e.expression.type&&"FunctionExpression"===e.expression.right.type?e.expression.right.body:"FunctionDeclaration"===e.type?e.body:null,"optionalAccess",e=>e.body,"access",e=>e.at,"call",e=>e(-2)]);if(!n(t,s))return null;if("ExpressionStatement"!==r([t,"optionalAccess",e=>e.type])||"LogicalExpression"!==t.expression.type||"SequenceExpression"!==t.expression.right.type||"AssignmentExpression"!==t.expression.right.expressions[0].type)return null;const o=t.expression.right.expressions[0].right;return"CallExpression"!==o.type||"Identifier"!==o.callee.type?null:{type:"ArrowFunctionExpression",params:[{type:"Identifier",name:"sig"}],body:{type:"CallExpression",callee:{type:"Identifier",name:o.callee.name},arguments:1===o.arguments.length?[{type:"Identifier",name:"sig"}]:[o.arguments[0],{type:"Identifier",name:"sig"}],optional:!1},async:!1,expression:!1,generator:!1}}(e);return c&&m.sig.push(c),"ExpressionStatement"!==e.type||("AssignmentExpression"===e.expression.type||"Literal"===e.expression.type)});d.body=g;for(const[e,n]of Object.entries(m)){const r=new Set(n.map(e=>JSON.stringify(e)));if(1!==r.size){throw`found ${r.size} ${e} function possibilities`+(r.size?`: ${n.map(e=>t.generate(e)).join(", ")}`:"")}g.push({type:"ExpressionStatement",expression:{type:"AssignmentExpression",operator:"=",left:{type:"MemberExpression",computed:!1,object:{type:"Identifier",name:"_result"},property:{type:"Identifier",name:e}},right:n[0]}})}return f.body.splice(0,0,...c),t.generate(f)}return function(e){const t="player"===e.type?u(e.player):e.preprocessed_player,n=function(e){const t={nsig:null,sig:null};return Function("_result",e)(t),t}(t),r={type:"result",responses:e.requests.map(e=>{if(!function(e,...t){return t.includes(e)}(e.type,"nsig","sig"))return{type:"error",error:`Unknown request type: ${e.type}`};const t=n[e.type];if(!t)return{type:"error",error:`Failed to extract ${e.type} function`};try{return{type:"result",data:Object.fromEntries(e.challenges.map(e=>[e,t(e)]))}}catch(e){return{type:"error",error:e instanceof Error?`${e.message}\n${e.stack}`:`${e}`}}})};return"player"===e.type&&e.output_preprocessed&&(r.preprocessed_player=t),r}}(meriyah,astring);